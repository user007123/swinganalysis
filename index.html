<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hover Greens Studio</title>
<style>
  :root{
    --bg:#000;
    --panel:#0A0A0A;
    --fg:#FFFFFF;
    --muted:#CCCCCC;
    --border:#1a1a1a;
    --accent:#1E7030;
    --stroke:#ff4b4b;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{background:var(--bg);color:var(--fg);font-family:system-ui,Arial,sans-serif;}
  .wrap{max-width:1200px;margin:0 auto;padding:24px;}
  header.hero{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;}
  .brand{font-weight:900;font-size:20px;display:flex;align-items:center;gap:8px;}
  .brand .dot{width:10px;height:10px;border-radius:50%;background:var(--accent);}
  .tag{font-size:12px;color:var(--muted);border:1px solid var(--border);padding:6px 10px;border-radius:999px;}
  .btn{background:#000;border:1px solid var(--border);color:var(--fg);padding:8px 12px;border-radius:8px;cursor:pointer;transition:.2s;}
  .btn:hover{background:var(--accent);color:#fff;border-color:var(--accent);}
  .btn.flat-green{background:var(--accent);border-color:var(--accent);}
  .btn.flat-green:hover{background:#155324;}
  .btn.danger{background:#ff4b4b;border-color:#ff4b4b;color:#000;}
  .btn.danger:hover{background:#c83c3c;color:#fff;}
  .panel{background:var(--panel);border:1px solid var(--border);border-radius:12px;overflow:hidden;transition:all .4s ease;}
  .panel header, .panel footer{padding:8px 10px;border-bottom:1px solid var(--border);}
  .panel footer{border-top:1px solid var(--border);border-bottom:none;}
  .tools{display:flex;gap:8px;flex-wrap:wrap;align-items:center;}
  .panels{display:grid;grid-template-columns:1fr 1fr;gap:16px;transition:all .4s ease;}
  .slot{position:relative;aspect-ratio:16/9;}
  video{width:100%;height:100%;background:#000;object-fit:contain;}
  canvas{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:auto;}
  select,input[type=number]{background:#000;border:1px solid var(--border);color:var(--fg);padding:4px 6px;border-radius:6px;}
  select.green{color:var(--accent);}
  .pill{border:1px solid var(--border);padding:6px 8px;border-radius:999px;background:#000;}
  .pill.green{color:var(--accent);}
  body.single .panels{grid-template-columns:1fr;}
  body.single #panelB, body.single #recordBothSection{display:none;}
  body.single #panelA{transform:scale(1.02);transition:transform .4s ease;}
  input[type=range]{width:150px;}
</style>
</head>
<body>
<div class="wrap">
  <header class="hero">
    <div class="brand"><span class="dot"></span>Hover Greens Studio</div>
    <span class="tag">Matte • Minimal • Pro</span>
  </header>

  <section class="panel">
    <header>
      <span>Global Controls</span>
      <div class="tools">
        <label class="pill">Playback <input id="rate" type="range" min="0.1" max="1.0" step="0.05" value="0.5"></label>
        <button class="btn" id="btnSync">Play/Pause Both</button>
        <label class="pill green">Mode:
          <select id="modeSelect" class="green">
            <option value="dual" selected>Dual Camera</option>
            <option value="single">Single Camera</option>
          </select>
        </label>
      </div>
    </header>
  </section>

  <section class="panels">
    <!-- Panel A -->
    <div class="panel" id="panelA">
      <header>
        <span>Angle A</span>
        <div class="tools">
          <button class="btn" data-cam>Use Camera</button>
          <select class="drawMode">
            <option value="off">Off</option>
            <option value="line">Line</option>
            <option value="circle">Circle</option>
          </select>
          <button class="btn" data-clear>Clear</button>
        </div>
      </header>
      <div class="slot">
        <video class="vid" autoplay playsinline></video>
        <canvas class="overlay"></canvas>
      </div>
    </div>

    <!-- Panel B -->
    <div class="panel" id="panelB">
      <header>
        <span>Angle B</span>
        <div class="tools">
          <button class="btn" data-cam>Use Camera</button>
          <select class="drawMode">
            <option value="off">Off</option>
            <option value="line">Line</option>
            <option value="circle">Circle</option>
          </select>
          <button class="btn" data-clear>Clear</button>
        </div>
      </header>
      <div class="slot">
        <video class="vid" autoplay playsinline></video>
        <canvas class="overlay"></canvas>
      </div>
    </div>
  </section>

  <section class="panel" id="recordBothSection" style="margin-top:16px;">
    <header>
      <span>Record Both (Sync)</span>
      <div class="tools">
        <button class="btn flat-green" id="recordBoth">● Record Both</button>
        <button class="btn danger" id="stopBoth" disabled>■ Stop</button>
      </div>
    </header>
  </section>
</div>

<script>
(async function(){
  const $ = (s,el=document)=>el.querySelector(s);
  const $$ = (s,el=document)=>[...el.querySelectorAll(s)];

  const modeSelect = $('#modeSelect');
  modeSelect.addEventListener('change',()=>{
    document.body.classList.toggle('single', modeSelect.value==='single');
  });

  async function startCam(video){
    const stream = await navigator.mediaDevices.getUserMedia({video:true,audio:false});
    video.srcObject = stream;
    video.play();
  }

  // Drawing
  function drawingLayer(overlay){
    const ctx=overlay.getContext('2d');
    const state={shapes:[],active:null,mode:'off'};
    function resize(){
      overlay.width=overlay.clientWidth;
      overlay.height=overlay.clientHeight;
      redraw();
    }
    window.addEventListener('resize',resize);
    resize();

    function redraw(){
      ctx.clearRect(0,0,overlay.width,overlay.height);
      ctx.strokeStyle='var(--stroke)';
      ctx.lineWidth=3;
      for(const s of state.shapes){
        if(s.type==='line'){
          ctx.beginPath();
          ctx.moveTo(s.a.x,s.a.y);
          ctx.lineTo(s.b.x,s.b.y);
          ctx.stroke();
        }else if(s.type==='circle'){
          ctx.beginPath();
          ctx.arc(s.c.x,s.c.y,s.r,0,Math.PI*2);
          ctx.stroke();
        }
      }
    }

    function pos(e){
      const r=overlay.getBoundingClientRect();
      const x=(e.clientX-r.left)/r.width*overlay.width;
      const y=(e.clientY-r.top)/r.height*overlay.height;
      return {x,y};
    }

    overlay.addEventListener('pointerdown',e=>{
      if(state.mode==='off')return;
      const p=pos(e);
      if(state.mode==='line') state.active={type:'line',a:p,b:p};
      else if(state.mode==='circle') state.active={type:'circle',c:p,r:0};
    });
    overlay.addEventListener('pointermove',e=>{
      if(!state.active)return;
      const p=pos(e);
      if(state.active.type==='line') state.active.b=p;
      else if(state.active.type==='circle'){
        const dx=p.x-state.active.c.x,dy=p.y-state.active.c.y;
        state.active.r=Math.hypot(dx,dy);
      }
      redraw(); ctx.setLineDash([5,5]);
      if(state.active.type==='line'){
        ctx.beginPath(); ctx.moveTo(state.active.a.x,state.active.a.y);
        ctx.lineTo(state.active.b.x,state.active.b.y); ctx.stroke();
      }else if(state.active.type==='circle'){
        ctx.beginPath(); ctx.arc(state.active.c.x,state.active.c.y,state.active.r,0,Math.PI*2); ctx.stroke();
      }
      ctx.setLineDash([]);
    });
    overlay.addEventListener('pointerup',()=>{
      if(state.active){
        if(state.active.type==='line') state.shapes.push(state.active);
        else if(state.active.type==='circle') state.shapes.push(state.active);
        state.active=null; redraw();
      }
    });
    return{
      setMode:m=>{state.mode=m;},
      clear:()=>{state.shapes=[];redraw();}
    }
  }

  // Initialize both panels
  $$('.panel').forEach(panel=>{
    const video=$('.vid',panel);
    const overlay=$('.overlay',panel);
    const drawSel=$('.drawMode',panel);
    const btnCam=$('[data-cam]',panel);
    const btnClear=$('[data-clear]',panel);
    if(!video)return;
    const drawAPI=drawingLayer(overlay);
    drawSel.addEventListener('change',()=>drawAPI.setMode(drawSel.value));
    btnCam.addEventListener('click',()=>startCam(video));
    btnClear.addEventListener('click',()=>drawAPI.clear());
  });

})();
</script>
</body>
</html>
